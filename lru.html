<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>lru算法</title>
    <style>


    </style>
</head>
<body>
     <div id="container">
         <p>请输入访存序列</p>
         <input type="text" id="number"/>
         <p>请输入分配的物理块数</p>
         <input type="text" id="line"/>
         <button id="btn">运行</button>
         <div id="content">

         </div>

     </div>
</body>
<script>
    var oBtn = document.getElementById('btn');
    var oNumber = document.getElementById("number");
    var aProcess = [];
    var line = null;
    var aPage = [];
    var iProcessIndex = 0;
    var iPageIndex = 0;
    var aClock = [];
    oBtn.onclick = function(){
        var stringProcess = oNumber.value;
        aProcess = stringProcess.split(",");
        console.log(aProcess);


        if(iPageIndex >= line){
            for(var i=0;i<aPage.length;i++){
                if(aPage[i] == aProcess[iProcessIndex]){
                    aPage[i] = aProcess[iProcessIndex];
                    aClock[i] = 0;
                    break;
                }

            }
            if(i == aPage.length){
                var iMax = 0;
                for(i = 0;i<aClock.length;i++){
                    if(aClock[iMax] < aClock[i]){
                        iMax = i;
                    }
                }
                console.log("第"+iMax+"个位置发生替换");
                aPage[iMax] = aProcess[iProcessIndex];
                aClock[iMax] = 0;
            }

        }else{
            for(i=0;i<aPage.length;i++){
                if(aPage[i] == aProcess[iProcessIndex]){
                    aPage[i] = aProcess[iProcessIndex];
                    aClock[i] = 0;
                    break;
                }

            }
            if(i == aPage.length){
                aPage[iPageIndex] = aProcess[iProcessIndex];
                aClock[iPageIndex] = 0;
            }
        }
        for(i = 0;i<aPage.length;i++){
            aClock[i] = aClock[i] + 1;
        }
        iPageIndex++;
        iProcessIndex++;
        if(iProcessIndex == aProcess.length){
            alert("完成");
            oBtn.onclick = null;
        }
        console.log("页面的内容为:"+aPage);
        console.log("页面中的元素的生存时间:"+aClock);
    }


</script>
</html>